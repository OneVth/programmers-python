# Python float vs decimal

> ë¶€ë™ì†Œìˆ˜ì  íƒ€ì… ì„ íƒ ê°€ì´ë“œ

## Python float = C double

| ì–¸ì–´ | íƒ€ì… | í¬ê¸° | ì •ë°€ë„ |
|------|------|------|--------|
| C | `float` | 4ë°”ì´íŠ¸ (32-bit) | ~7ìë¦¬ |
| C | `double` | 8ë°”ì´íŠ¸ (64-bit) | ~15ìë¦¬ |
| **Python** | `float` | **8ë°”ì´íŠ¸ (64-bit)** | **~15ìë¦¬** |

**Pythonì—ëŠ” 32-bit floatì´ ì—†ë‹¤!** Pythonì˜ `float`ì€ Cì˜ `double`ê³¼ ë™ì¼.

---

## ì™œ ì˜¤ì°¨ê°€ ë°œìƒí• ê¹Œ?

### ì´ì§„ë²• ë³€í™˜ ë¬¸ì œ

```python
# 0.1ì€ ì´ì§„ë²•ìœ¼ë¡œ ë¬´í•œì†Œìˆ˜
0.1 (10ì§„ë²•) = 0.0001100110011... (2ì§„ë²•, ë¬´í•œë°˜ë³µ)

>>> 0.1 + 0.2
0.30000000000000004  # âŒ

>>> 0.1 + 0.2 == 0.3
False  # ğŸ˜±
```

### ì •í™•íˆ í‘œí˜„ ê°€ëŠ¥í•œ ì†Œìˆ˜

```python
# 2ì˜ ê±°ë“­ì œê³± ë¶„ëª¨ â†’ ì •í™•íˆ í‘œí˜„
0.5   = 1/2    # âœ…
0.25  = 1/4    # âœ…
0.125 = 1/8   # âœ…
0.0   = 0/1    # âœ…

# ê·¸ ì™¸ â†’ ê·¼ì‚¬ê°’
0.1 = 1/10    # âŒ
0.3 = 3/10    # âŒ
```

---

## float vs Decimal

| íŠ¹ì„± | float | Decimal |
|------|-------|---------|
| í‘œí˜„ ë°©ì‹ | ì´ì§„ë²• (2ì§„ìˆ˜) | ì‹­ì§„ë²• (10ì§„ìˆ˜) |
| 0.1 í‘œí˜„ | ê·¼ì‚¬ê°’ | **ì •í™•íˆ 0.1** |
| ì†ë„ | ë§¤ìš° ë¹ ë¦„ | ëŠë¦¼ (~100ë°°) |
| ë©”ëª¨ë¦¬ | 8ë°”ì´íŠ¸ ê³ ì • | ê°€ë³€ (ë” í¼) |
| ìš©ë„ | ê³¼í•™/ê³µí•™ ê³„ì‚° | **ê¸ˆìœµ**, íšŒê³„ |

```python
from decimal import Decimal

>>> Decimal('0.1') + Decimal('0.2')
Decimal('0.3')  # âœ… ì •í™•!

>>> Decimal('0.1') + Decimal('0.2') == Decimal('0.3')
True
```

---

## ì‚¬ìš© ê°€ì´ë“œ

### float ì‚¬ìš© (ê¸°ë³¸)

```python
# ê³¼í•™/ê³µí•™ ê³„ì‚°
average = sum(numbers) / len(numbers)
distance = math.sqrt(x**2 + y**2)

# ì½”ë”©í…ŒìŠ¤íŠ¸ ëŒ€ë¶€ë¶„
def solution(numbers):
    return sum(numbers) / len(numbers)
```

### Decimal ì‚¬ìš© (ì •ë°€ë„ í•„ìˆ˜)

```python
from decimal import Decimal

# ê¸ˆìœµ/íšŒê³„ ê³„ì‚°
price = Decimal('19.99')
tax = price * Decimal('0.1')
total = price + tax  # ì •í™•í•œ í™”í ê³„ì‚°

# ì •í™•í•œ ë¹„êµê°€ í•„ìš”í•  ë•Œ
if Decimal('0.1') + Decimal('0.2') == Decimal('0.3'):
    print("ì •í™•!")
```

---

## ì½”ë”©í…ŒìŠ¤íŠ¸ íŒ

1. **ëŒ€ë¶€ë¶„ floatìœ¼ë¡œ ì¶©ë¶„** - ë¬¸ì œì—ì„œ ë¶€ë™ì†Œìˆ˜ì  ì˜¤ì°¨ë¥¼ ê³ ë ¤í•´ ì¶œì œí•¨

2. **".0 ë˜ëŠ” .5ë§Œ ì¶œë ¥" ì œí•œ** - ì´ëŸ° ì œí•œì´ ìˆìœ¼ë©´ float ì˜¤ì°¨ ê±±ì • ì—†ìŒ
   - ì˜ˆ: í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ #120817 (ë°°ì—´ì˜ í‰ê· ê°’)

3. **ë¹„êµ ì‹œ ì£¼ì˜** - `==` ëŒ€ì‹  ì˜¤ì°¨ í—ˆìš© ë¹„êµ
   ```python
   # âŒ ìœ„í—˜
   if result == 0.3:

   # âœ… ì•ˆì „
   if abs(result - 0.3) < 1e-9:
   ```

---

*ì°¸ê³ : numpyë¥¼ ì‚¬ìš©í•˜ë©´ `np.float32` (C float)ë„ ì‚¬ìš© ê°€ëŠ¥*
